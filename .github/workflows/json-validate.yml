# This workflow validates the syntax of all JSON files in the repository.
name: Validate JSON

on:
  push:
    branches: [ "main", "develop" ]
  pull_request:
    branches: [ "main", "develop" ]

jobs:
  validate:
    name: Run JSON Syntax Check
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v3

      - name: Validate all JSON files
        run: |
          find . -name "*.json" -not -path "./node_modules/*" -print0 | while IFS= read -r -d $'\0' file; do
            echo "Validating $file"
            jq . "$file" > /dev/null
            if [ $? -ne 0 ]; then
              echo "::error file=$file::Invalid JSON syntax."
              exit 1
            fi
          done
